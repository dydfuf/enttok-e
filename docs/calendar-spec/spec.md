# 캘린더 UI 스펙 (MVP)

- 작성일: 2025-12-24
- 근거 문서: `docs/calendar/research.md`

---

## 1. 목표/스코프

- 데일리 노트에 **오늘 일정만** 명확하게 노출한다.
- 별도 캘린더 탭에서 **전체 일정(읽기 전용)** 을 제공한다.
- 이벤트 컨텍스트에서 **회의 노트 생성**과 **녹음 시작** 액션을 제공한다.

### 1.1 비목표
- 캘린더 탭에서 이벤트 생성/수정/드래그 재배치
- 캘린더 제공자별 고급 설정(고급 반복 규칙 편집 등)

---

## 2. 화면 구성 요약

### 2.1 데일리 노트(오늘 일정)
- 위치: 데일리 노트 상단 섹션
- 표시 범위: 로컬 타임존 기준 00:00-23:59에 **겹치는 이벤트**
- 기본 형태: 리스트(시간, 제목, 캘린더 색상 점)

### 2.2 캘린더 탭(전체)
- 기본 뷰: 주간(일/주/월 토글)
- 좌측 패널: 캘린더 목록(토글/색상) + 미니 월 캘린더
- 우측(또는 모달): 이벤트 상세 패널
- 읽기 전용: 드래그/인라인 수정 비활성

### 2.3 이벤트 상세 패널
- 필수 정보: 제목, 시간, 위치, 참석자, 설명, 회의 링크
- 기본 액션: 회의 노트 만들기, 미팅 링크 열기, 캘린더에서 보기

---

## 3. 데일리 노트 상세 스펙

### 3.1 섹션 레이아웃
- 헤더: "오늘" 또는 "오늘 일정"
- 종일 일정: 별도 그룹으로 상단 고정
- 시간대 일정: 시작 시간 기준 정렬

### 3.2 리스트 아이템 구성
- 좌측: 시간(시작-종료) 또는 "종일"
- 중앙: 제목(1줄, 말줄임)
- 우측: 캘린더 색상 점
- 보조 정보(있을 때만): 장소, 회의 링크

### 3.3 강조 규칙
- 진행 중: 약한 배경 강조
- 종료: 톤 다운
- 예정: 기본 톤

### 3.4 액션
- 항목 클릭: 이벤트 상세 패널 오픈
- 빠른 액션:
  - 회의 노트 만들기
  - 미팅 링크 열기(있을 때만)
  - 캘린더에서 보기

### 3.5 빈 상태
- 문구 + "캘린더 열기" 버튼

---

## 4. 캘린더 탭 상세 스펙

### 4.1 뷰
- 기본: 주간(7일)
- 토글: 일/주/월

### 4.2 좌측 패널
- 캘린더 리스트: 체크 토글 + 색상
- 미니 월 캘린더: 빠른 이동

### 4.3 이벤트 상호작용
- 클릭: 이벤트 상세 패널 오픈
- 읽기 전용 명시(툴팁 또는 비활성 스타일)

---

## 5. 이벤트 상세 패널

### 5.1 정보 영역
- 제목
- 시간(타임존 표기)
- 위치
- 참석자
- 설명
- 회의 링크

### 5.2 액션 영역
- 회의 노트 만들기
- 미팅 링크 열기
- 캘린더에서 보기
- 보조: 일정 정보 복사, 미팅 링크 복사

---

## 6. 데이터 모델 (프론트 기준 DTO)

```ts
export type CalendarEvent = {
  id: string;
  calendarId: string;
  title: string;
  startAt: string; // ISO
  endAt: string;   // ISO
  isAllDay: boolean;
  timezone: string;
  location?: string;
  conferenceUrl?: string;
  description?: string;
  attendees?: Array<{ name?: string; email: string; response?: string }>;
  organizer?: { name?: string; email: string };
  color?: string;
  status?: "confirmed" | "tentative" | "cancelled";
  visibility?: "default" | "public" | "private" | "confidential";
  htmlLink?: string;
  updatedAt?: string; // ISO
  source?: "google";
};

export type CalendarListItem = {
  id: string;
  name: string;
  color?: string;
  isPrimary?: boolean;
  isSelected: boolean;
  accessRole?: "owner" | "writer" | "reader" | "freeBusyReader";
  timezone?: string;
  source?: "google";
};
```

---

## 7. 동작 규칙

- 오늘 일정 필터: `startAt <= 오늘 종료` AND `endAt >= 오늘 시작`
- 정렬: 시작 시간 오름차순
- 멀티데이 이벤트: 오늘과 겹치는 경우 표시, 시간 표기는 해당 날짜 기준
- 회의 링크: `conferenceUrl`가 있을 때만 노출
- 캘린더에서 보기: 제공자 딥링크가 가능할 때만 활성
- 개인/비공개 일정도 기본적으로 제목 포함 노출(마스킹 없음)
- 동기화는 계정 내 **모든 캘린더**를 기본 대상으로 한다

---

## 8. 상태 처리

- 로딩: 스켈레톤 + "동기화 중" 표시
- 오류: 재시도 버튼 + 캐시 데이터 표시(가능 시)
- 오프라인: 마지막 데이터 + "오래됨" 배지
- 권한 거부: 연결 재시도 CTA

---

## 9. 설정 항목(확정, MVP)

- 표시할 캘린더 선택(다중 선택)
- 기본 뷰(기본값: 주간)
- 회의 노트 템플릿 선택
- 녹음 저장 위치(기본값: `<vault>/.enttokk-e/recordings/`)

---

## 10. 제외 사항

- 캘린더 이벤트 편집/생성/삭제
- 참석자 초대/응답 처리
- 고급 반복 규칙 편집
